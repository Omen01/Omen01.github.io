<script>
    // Fetch words.txt and populate the words array
    fetch('words.txt')
        .then(response => response.text())
        .then(text => {
            const words = text.trim().split('\n').map(word => word.trim().toUpperCase()).filter(word => word.length === 5);
            if (words.length === 0) {
                console.error('No valid 5-letter words found in words.txt');
                return;
            }

            const secret = words[Math.floor(Math.random() * words.length)];
            const grid = document.getElementById('gameGrid');
            let attempts = 0, maxAttempts = 6;
            const message = document.getElementById('message');

            function createGrid() {
                for (let i = 0; i < maxAttempts * 5; i++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    grid.appendChild(tile);
                }
            }

            function makeGuess() {
                const input = document.getElementById('guessInput').value.toUpperCase();
                if (input.length !== 5 || !words.includes(input)) {
                    message.textContent = 'Invalid 5-letter word!';
                    return;
                }
                const tiles = grid.children;
                const start = attempts * 5;
                for (let i = 0; i < 5; i++) {
                    const tile = tiles[start + i];
                    if (input[i] === secret[i]) tile.className = 'tile green';
                    else if (secret.includes(input[i])) tile.className = 'tile yellow';
                    else tile.className = 'tile gray';
                    tile.textContent = input[i];
                }
                attempts++;
                if (input === secret) {
                    message.textContent = `You win! Word was ${secret}. Attempts: ${attempts}`;
                } else if (attempts === maxAttempts) {
                    message.textContent = `Game over! Word was ${secret}`;
                } else {
                    message.textContent = `Attempts left: ${maxAttempts - attempts}`;
                }
                document.getElementById('guessInput').value = '';
            }

            createGrid();
        })
        .catch(error => console.error('Error loading words.txt:', error));
</script>
